# 如何重构代码

> [重构之十六字心法](http://insights.thoughtworkers.org/principles-of-refactoring/)

>  **代码重构**（英语：code refactoring）指对软件**代码**做任何更动以增加可读性或者简化结构而不影响输出结果。 软件**重构**需要借助工具完成，**重构**工具能够修改**代码**同时修改所有引用该**代码**的地方。

在思考如何重构之前，我想应该了解清楚为什么要重构？

- 提高可维护性，避免以后的迭代产生更多的麻烦。
- 使代码更优雅更利于阅读
- 提高应用性能

对于我而言，在学习和工作的过程中逐渐了解了更多的技巧和方法，这些技巧和方法会更加有利于应用的开发和维护性，并且也能够提高应用的功能和效率。

那一个项目到底应该如何重构呢？

前端项目是从整体来看是由 UI 和数据组成的，用户行为改变数据从而改变视图，那么对于重构而言是否应该先去理清数据流？或者了解清楚 UI 的组成，特别是对于 React 项目而言，由组件所构成，那么去了解组件是否是一个好的方式呢？

组件内部除了`render()`中`return`所返回的 UI 视图之外，实际上其余部分都是由逻辑和数据所组成的，那么了解这些数据是什么，这些行为是什么也是非常重要的。

但在了解组件之前，分析应用的功能和构成，这将帮助我们了解组件具体的行为。

最后可能就是代码中所有细节了，这就需要去逐步阅读代码。

## 重构组件的问题

因为组件的状态和行为的管理方式可以有多种，特别是对于使用 Redux 的应用而言更是如此，那么一开始将影响组件状态的数据放到哪里进行管理就是一个非常重要的问题，如果状态对于多个组件而言都需要的话，放到位于「更上方」位置的组件中进行管理就很好，对于使用了 Redux 的应用来说，就是将其存放到 store 中进行管理。并并不是所有状态在一开始就能够知道未来是否会被使用到的，对于一些只负责改变组件 UI 效果的状态而言，可能一开始存放在组件本身比使用 Redux 来进行管理会更好，因为不必那么麻烦的去获取与更改数据。只是当组件的这一状态需要被应用到其他组件之中时，再将其提升到 Redux 中进行管理就好。